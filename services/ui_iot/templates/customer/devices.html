{% extends "customer/base.html" %}

{% block title %}Devices - OpsConductor Pulse{% endblock %}

{% block content %}
<h2>Devices</h2>

<table>
    <thead>
        <tr>
            <th>Device ID</th>
            <th>Site</th>
            <th>Status</th>
            <th>Last Seen</th>
            <th>Battery</th>
            <th>Metrics</th>
        </tr>
    </thead>
    <tbody>
        {% for d in devices %}
        <tr>
            <td><a href="/customer/devices/{{ d.device_id }}">{{ d.device_id }}</a></td>
            <td>{{ d.site_id }}</td>
            <td class="status-{{ d.status|lower }}">{{ d.status }}</td>
            <td>{{ d.last_seen_at }}</td>
            <td>
                {% if d.state and d.state.battery_pct is not none %}
                    {{ d.state.battery_pct }}%
                {% elif d.battery_pct is not none %}
                    {{ d.battery_pct }}%
                {% else %}
                    -
                {% endif %}
            </td>
            <td class="small">
                {% if d.state %}
                    {{ d.state|length }} metrics
                {% else %}
                    -
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
